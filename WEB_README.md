# Web 界面使用指南

## 🚀 快速启动

### 方法一：双击启动（推荐）

1. 双击 `run_web.py` 文件
2. 浏览器会自动打开 `http://127.0.0.1:8000`
3. 开始使用！

### 方法二：命令行启动

```bash
python run_web.py
```

### 方法三：自定义端口

```bash
python run_web.py --port 8080
```

---

## 📱 界面功能

### 1. 控制面板

**功能：**
- 📊 查看统计数据（收集、分析、生成、发送）
- ▶️ 启动任务
- ⏸️ 停止任务
- 📈 查看进度

**运行模式：**
- **完整工作流**（推荐）：收集 → 分析 → 生成 → 回复
- **仅收集热点**：只收集不处理
- **收集并分析**：收集 + 需求分析
- **生成回复**：生成回复内容（不发送）
- **处理单个帖子**：针对指定链接

**参数设置：**
- 收集热点数：建议 20-30
- 回复数量：建议 3-5
- 自动发送：⚠️ 谨慎使用（Level 3）

---

### 2. 系统配置

#### LLM API 配置

**必填项：**
- **模型**：选择使用的模型
  - GPT-4o（推荐，性价比高）
  - GPT-4（质量最好，成本较高）
  - Claude 3.5 Sonnet（推荐）
  - Claude 3 Opus（最高质量）

- **API 地址**：
  - OpenAI: `https://api.openai.com/v1`
  - 其他兼容 API 的地址

- **API Key**：你的 API 密钥

**可选项：**
- 最大 Token：默认 4096
- Temperature：默认 0（更确定）

**保存后点击"保存 LLM 配置"按钮**

---

#### 小红书配置

**回复限制：**
- 每天目标回复数：建议 3-5
- 最大回复数：建议不超过 10
- 最小相关性评分：0.7

**工作时间：**
- 工作开始时间：9:00
- 工作结束时间：22:00

**安全设置：**
- 需要人工审核：✅ 建议勾选（Level 2）
- 最小延迟：300 秒（5分钟）
- 最大延迟：900 秒（15分钟）

**行为模拟：**
- ✅ 模拟打字速度
- ✅ 模拟阅读停顿
- ✅ 随机鼠标移动

**保存后点击"保存小红书配置"按钮**

---

### 3. 实时日志

**功能：**
- 📝 查看系统运行日志
- 🔍 实时更新（WebSocket）
- 🗑️ 清空日志

**日志级别：**
- 🔵 INFO：一般信息
- 🟢 SUCCESS：成功操作
- 🟡 WARNING：警告信息
- 🔴 ERROR：错误信息

---

### 4. 数据查看

**功能：**
- 🔄 刷新热点数据
- 📊 刷新分析结果
- 💬 刷新回复内容

**热点数据：**
显示今日收集的热点列表，包括：
- 标题
- 内容摘要
- 互动数据（点赞、评论、收藏）

**分析结果：**
显示需求分析结果，包括：
- 优先级评分
- 用户痛点
- 商业价值

**回复内容：**
显示生成的回复，以 Markdown 格式呈现。

---

## 🎯 使用流程

### 第一次使用

#### Step 1: 启动 Web 界面

```bash
python run_web.py
```

浏览器会自动打开 `http://127.0.0.1:8000`

#### Step 2: 配置 LLM API

1. 点击"系统配置"标签
2. 填写 API 信息：
   - 模型：选择 `gpt-4o`
   - API 地址：`https://api.openai.com/v1`
   - API Key：`sk-your-key-here`
3. 点击"保存 LLM 配置"
4. 看到"LLM 配置保存成功！"提示

#### Step 3: 调整小红书配置（可选）

1. 在"系统配置"页面
2. 调整参数（默认值已经很好）
3. 点击"保存小红书配置"

#### Step 4: 测试系统

1. 回到"控制面板"
2. 选择运行模式：`仅收集热点`
3. 收集热点数：`5`
4. 点击"启动任务"
5. 查看"实时日志"确认运行正常

#### Step 5: 运行完整流程

1. 确认测试正常
2. 选择运行模式：`完整工作流`
3. 收集热点数：`20`
4. 回复数量：`5`
5. 点击"启动任务"

---

## 📊 状态监控

### 状态指示器

- **灰色**：系统就绪
- **蓝色**：运行中
- **绿色**：已完成
- **红色**：出错

### 统计卡片

实时显示：
- 收集热点数
- 分析话题数
- 生成回复数
- 发送成功数

### 进度条

显示当前任务进度（0-100%）

---

## ⚠️ 重要提示

### 安全建议

1. **首次使用**
   - ✅ 使用"仅收集热点"测试
   - ✅ 检查日志确认正常
   - ✅ 人工审核生成内容

2. **Level 2 vs Level 3**
   - **Level 2**（默认）：自动填写 + 手动发送
   - **Level 3**（⚠️）：完全自动发送

3. **频率控制**
   - 每天不超过 5-10 条
   - 间隔至少 5-15 分钟
   - 避开深夜时段

### 常见问题

#### Q1: 端口被占用怎么办？

**A:** 修改启动端口：

```bash
python run_web.py --port 8080
```

#### Q2: 浏览器没有自动打开？

**A:** 手动打开浏览器访问：

```
http://127.0.0.1:8000
```

#### Q3: 任务启动失败？

**A:** 检查：
1. LLM API 是否配置正确
2. API Key 是否有效
3. 网络连接是否正常
4. 查看"实时日志"了解详情

#### Q4: 如何停止任务？

**A:** 在控制面板点击"停止任务"按钮

---

## 🔧 高级功能

### WebSocket 实时通信

界面使用 WebSocket 与服务器通信，实现：
- 实时日志更新
- 任务状态同步
- 无刷新数据更新

### API 端点

系统提供 REST API：

```
GET  /api/config/llm          # 获取 LLM 配置
POST /api/config/llm          # 保存 LLM 配置
GET  /api/config/xiaohongshu  # 获取小红书配置
POST /api/config/xiaohongshu  # 保存小红书配置
GET  /api/task/status         # 获取任务状态
POST /api/task/start          # 启动任务
POST /api/task/stop           # 停止任务
GET  /api/data/hot-topics     # 获取热点数据
GET  /api/data/analysis       # 获取分析结果
GET  /api/data/replies        # 获取回复内容
```

---

## 📱 界面截图

### 主界面

```
┌─────────────────────────────────────────┐
│      小红书自动化系统                    │
│   热点挖掘 · 需求分析 · 智能回复          │
├─────────────────────────────────────────┤
│ ● 系统就绪 | 当前步骤: -                │
├─────────────────────────────────────────┤
│ [控制面板] [系统配置] [实时日志] [数据]  │
├─────────────────────────────────────────┤
│  统计卡片                               │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐      │
│  │  20 │ │  15 │ │   8 │ │   5 │      │
│  │收集│ │分析│ │生成│ │发送│      │
│  └─────┘ └─────┘ └─────┘ └─────┘      │
│                                         │
│  运行模式: [完整工作流 ▼]              │
│  收集热点数: [20]                      │
│  回复数量:   [5]                       │
│                                         │
│  [启动任务] [停止任务]                 │
│                                         │
│  任务进度: ████████░░ 80%              │
└─────────────────────────────────────────┘
```

---

## 🎓 最佳实践

### 1. 分阶段测试

**Week 1:**
- 每天运行 1-2 次
- 每次只收集 5-10 个热点
- 生成 2-3 个回复
- 仔细审核内容质量

**Week 2:**
- 增加到 20 个热点
- 生成 5 个回复
- 观察互动效果
- 优化配置参数

**Week 3+:**
- 根据效果调整
- 考虑升级到 Level 3
- 建立自动化流程

### 2. 内容质量把关

**每次发送前检查：**
- ✅ 内容是否相关
- ✅ 是否有实际价值
- ✅ 是否符合小红书风格
- ✅ 是否包含敏感词
- ❌ 不是纯广告
- ❌ 不夸大宣传

### 3. 数据驱动优化

**每周回顾：**
1. 查看生成的内容
2. 统计互动率
3. 分析高互动回复特点
4. 调整生成策略

---

## 🆘 获取帮助

### 问题排查

1. **查看实时日志**
   - 了解详细错误信息
   - 定位问题所在

2. **检查配置**
   - LLM API 是否正确
   - 网络连接是否正常
   - 参数是否合理

3. **重启服务**
   ```bash
   # Ctrl+C 停止
   # 重新运行
   python run_web.py
   ```

### 联系支持

- 查看文档：`XIAOHONGSHU_README.md`
- 查看架构：`XIAOHONGSHU_ARCHITECTURE.md`
- GitHub Issues：[提交问题]

---

## ✅ 总结

**Web 界面让你可以：**
- 🎛️ 可视化配置所有参数
- 📊 实时监控任务状态
- 📝 查看实时日志
- 💾 管理生成数据
- 🚀 一键启动任务

**现在就开始使用吧！**

```bash
python run_web.py
```

然后打开浏览器访问：`http://127.0.0.1:8000`

---

**版本**: v1.0.0
**更新**: 2025-01-29

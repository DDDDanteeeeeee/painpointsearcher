"""
小红书系统的 Prompt 模板
"""

# 系统提示词
XIAOHONGSHU_SYSTEM_PROMPT = """你是一个专业的小红书内容分析和创作助手，具备以下能力：

1. **热点敏感度**：能快速识别小红书平台上的热点话题和趋势
2. **用户洞察**：深刻理解小红书用户的心理、需求和痛点
3. **内容创作**：能创作符合小红书风格的高质量内容（真实、有用、有温度）
4. **商业嗅觉**：能从热点中挖掘潜在的商机和用户需求

你的工作原则：
- 只分析真实的数据，不编造信息
- 生成的回复必须真实、有价值，不能是垃圾广告
- 保持小红书社区的真实氛围
- 尊重用户，提供真诚的帮助
"""

# 热点分析 Prompt
HOT_TOPIC_ANALYSIS_PROMPT = """请分析以下小红书热点内容，挖掘潜在的用户需求和商业价值：

## 热点内容：
标题：{title}
内容摘要：{content}
互动数据：点赞{likes} | 评论{comments} | 收藏{collects}
热门评论：{top_comments}

## 分析要求：

1. **用户痛点分析**
   - 用户在抱怨什么问题？
   - 用户表达了什么不满？
   - 用户希望得到什么帮助？

2. **潜在需求挖掘**
   - 这个热点反映了什么未被满足的需求？
   - 用户愿意为解决这个问题付出什么（时间、金钱）？
   - 需求的紧急程度和普遍程度如何？

3. **商业价值评估**
   - 是否有变现可能？（产品推荐、知识付费、服务等）
   - 目标用户群体的消费能力如何？
   - 竞争程度如何？

4. **回复策略建议**
   - 最有效的回复角度（专业/产品/经验/情感）
   - 推荐的回复内容类型
   - 预估的互动率

请以结构化的 JSON 格式输出分析结果。
"""

# 需求挖掘 Prompt
DEMAND_MINING_PROMPT = """基于以下热点分析结果，深入挖掘用户需求：

## 已有分析：
{previous_analysis}

## 挖掘要求：

1. **需求分类**
   - 【工具需求】：用户需要什么工具/产品？
   - 【知识需求】：用户想了解什么信息？
   - 【情感需求】：用户寻求什么支持/认同？

2. **需求优先级**
   按照以下维度评分（1-10分）：
   - 紧急性：用户多迫切需要解决方案
   - 普遍性：多少用户有类似需求
   - 商业性：变现的可能性
   - 可行性：提供解决方案的难度

3. **解决方案方向**
   - 可以推荐哪些产品/服务？
   - 可以分享哪些知识/经验？
   - 可以提供哪些情感支持？

请输出：需求排序（TOP 3）+ 每个需求的详细分析
"""

# 内容生成 Prompt
CONTENT_GENERATION_PROMPT = """为小红书帖子生成高质量的回复内容。

## 目标帖子信息：
标题：{title}
用户痛点：{pain_point}
核心需求：{demand}
目标角度：{angle}  # 可选：专业/产品/经验/情感

## 小红书回复特点：
1. 真诚：像真人一样分享，不要像广告
2. 有用：提供实际帮助或有价值的信息
3. 有温度：情感共鸣，让读者感受到善意
4. 个性化：避免模板化，要有自己的风格
5. 适度长度：50-200字为宜，不要太长也不要太短

## 生成要求：
请生成 3-5 个不同版本的回复，每个版本要有：
- 独特的切入角度
- 不同的表达风格
- 高度相关的内容
- 吸引力的开头和结尾

## 输出格式：
```markdown
## 版本 1：【{角度}】
{回复内容}

评分：相关性{X}/10 | 吸引力{Y}/10

## 版本 2：【{角度}】
{回复内容}

评分：相关性{X}/10 | 吸引力{Y}/10

...
```

注意：
- 避免使用："你好"、"请问"等过于客套的表达
- 避免明显的推销语言（"强烈推荐"、"必买"等）
- 避免夸张的表达（"绝绝子"、"yyds"等）
- 保持真实、自然、有用的风格
"""

# 内容优化 Prompt
CONTENT_OPTIMIZATION_PROMPT = """优化以下小红书回复内容，使其更符合平台风格。

## 原始内容：
{original_content}

## 优化目标：
1. 提高真实感：去掉机器感，增加人情味
2. 增加吸引力：优化开头，让读者想继续看
3. 提升价值感：确保内容对读者有帮助
4. 符合小红书风格：自然、真诚、接地气

## 优化后的内容应：
- 开头 10 字内抓住注意力
- 中间提供具体帮助或信息
- 结尾自然，不需要明显的 CTA
- 总长度 50-200 字

请输出优化后的内容。
"""

# 质量评估 Prompt
QUALITY_ASSESSMENT_PROMPT = """评估小红书回复内容的质量。

## 回复内容：
{content}

## 目标帖子：
{target_post_context}

## 评估维度：

1. **相关性**（1-10分）
   - 内容是否与帖子高度相关？
   - 是否回应了用户的痛点？

2. **吸引力**（1-10分）
   - 开头是否吸引人？
   - 内容是否有价值？
   - 是否让人想互动？

3. **真实感**（1-10分）
   - 是否像真人写的？
   - 是否有广告感？
   - 是否过于模板化？

4. **小红书风格**（1-10分）
   - 是否符合平台氛围？
   - 是否接地气？
   - 是否真诚？

5. **风险评估**
   - 是否包含敏感词？
   - 是否可能被举报？
   - 是否有法律风险？

请输出：
- 总体评分（1-10分）
- 各维度评分
- 是否推荐发送（是/否/修改后使用）
- 具体修改建议（如果不推荐）
"""

# 总结报告 Prompt
DAILY_REPORT_PROMPT = """生成小红书热点分析和回复策略的日报。

## 今日数据：
{daily_data}

## 报告要求：

1. **热点总览**
   - 今日热点数量
   - TOP 热点列表（热度排序）

2. **需求分析**
   - 挖掘出的需求列表
   - 高价值需求 TOP 3

3. **回复建议**
   - 推荐回复的热点
   - 每个热点的回复策略
   - 生成的内容概览

4. **数据洞察**
   - 今日趋势特点
   - 用户画像分析
   - 商机提示

请生成结构清晰、数据详实的 Markdown 报告。
"""


def get_prompt(prompt_name: str, **kwargs) -> str:
    """获取格式化后的 Prompt"""
    prompt_templates = {
        'system': XIAOHONGSHU_SYSTEM_PROMPT,
        'hot_topic_analysis': HOT_TOPIC_ANALYSIS_PROMPT,
        'demand_mining': DEMAND_MINING_PROMPT,
        'content_generation': CONTENT_GENERATION_PROMPT,
        'content_optimization': CONTENT_OPTIMIZATION_PROMPT,
        'quality_assessment': QUALITY_ASSESSMENT_PROMPT,
        'daily_report': DAILY_REPORT_PROMPT,
    }

    template = prompt_templates.get(prompt_name, '')
    if kwargs:
        return template.format(**kwargs)
    return template
